ТЫ — SENIOR FULL-STACK ENGINEER + DATA ENGINEER.
НУЖНО: полностью прокачать раздел приложения “Источники” (Sources) в Shorts Factory.

# 0) Проблема сейчас
- В каждой категории ~20 “фиговых” источников, часть не работает.
- Нет нормальной валидации RSS/URL.
- Нет реально качественного “тренд-сканера” (YouTube Shorts / тренды), который дальше влияет на генерацию сценариев.

# 1) Цели
1) Сделать по 20–30 КАЧЕСТВЕННЫХ источников на каждую категорию (RSS + API + curated links).
2) Автоматически проверять, что источники живые, обновляются и дают контент.
3) Считать тренды (особенно YouTube Shorts) и превращать их в “Trend Signals”:
   - темы/ключи, частотность, угол/подача, паттерны хуков, длительность, формат.
4) Подключить это к “Топики” и “Скрипт”:
   - “Топики” формируются из источников + трендов
   - “Скрипт” при генерации использует Trend Signals (как подсказку, а не копирование)

# 2) Категории и структура
Категории на экране (как в UI):
- Мировые новости
- Новости России
- Игры
- Мемы
- Тренды
- Мода
- Музыка
- Интересное
- Факты и исследования
- Кино
- Сериалы
- Медицина
- YouTube тренды (и отдельный блок “YouTube Shorts Trends”)

Нужно: для каждой категории хранить 20–30 источников.
Каждый источник имеет тип:
- rss
- api
- html (fallback парсер)
- youtube_channel / youtube_search / youtube_trending
- social (опционально, если допустимо)

# 3) Data model (обязательно)
Source {
  id,
  categoryId,
  name,
  type, // rss|api|html|youtube_channel|youtube_search|youtube_trending
  url,
  country, language,
  priority (1-5),
  enabled,
  lastCheckAt,
  health: {
    status: "ok"|"warning"|"dead",
    httpCode,
    avgLatencyMs,
    lastSuccessAt,
    failuresCount,
    freshnessHours, // сколько часов назад был последний свежий пост
  },
  parseRules: { ... } // если html
  notes
}

Item (контент из источника):
- title, summary, url, publishedAt, sourceId, categoryId, tags[], entities[], language
- hash/dedup key, чтобы не было дублей

TrendSignal (главное для связки со Скриптом):
TrendSignal {
  platform, // youtube_shorts, youtube, tiktok(опционально)
  topicClusterId,
  keywords[],
  angles[],           // “углы подачи”: скандал, польза, сравнение, история, рейтинг...
  hookPatterns[],     // типовые ходы (не тексты!)
  pacingHints,        // быстрый/средний/медленный монтаж
  durationModes[],    // 20-30-45-60-120 etc
  exampleRefs[],      // ссылки (без копирования текста)
  score,              // важность/вирусность
  updatedAt
}

# 4) Качество источников: критерии отбора
Нужно сформировать curated список источников по каждой категории:
- надежность/репутация (известные медиа/порталы/официальные блоги)
- регулярные обновления
- наличие RSS или стабильных страниц
- разнообразие точек зрения (не 1 домен)
- не собирать откровенный мусор/клоаки

# 5) Автопроверка работоспособности (must-have)
Добавить “Health Checker”:
- при добавлении источника → проверить: доступность, валидность RSS (если rss), первые 10 items, корректность дат
- плановый крон: каждые 6 часов (или 12) пробежать все enabled источники и обновить health
- если источник “dead” 3 дня подряд → пометить как disabled и показать в UI “не работает”
- в UI добавить фильтр: “Только рабочие”, “Проблемные”

# 6) Наполнение: по 20–30 источников на категорию
Сделай seed-данные:
- JSON файл sources.seed.json с категориями и источниками
- минимум 20 источников на категорию, цель 30
- MIX: RSS + API + YouTube (каналы/поиск)

ВАЖНО: если источник не имеет RSS — можно добавить как html-parsing с простыми правилами (title/link/date selectors) ИЛИ API.
Если в процессе наполнения часть источников окажется нестабильной → замени на более стабильные.

# 7) YouTube Trends + YouTube Shorts Trends (ключевое)
Нужно встроить отдельный модуль:
7.1 YouTube Data API (если есть ключ) — предпочтительно:
- trending videos по региону + категории
- поиск по “shorts”/“#shorts” и по ключевым словам из категорий
- топ по просмотрам за 24-72 часа
7.2 Если API ключа нет:
- fallback: RSS каналов YouTube (channel feed), и/или парсинг публичных страниц (аккуратно, кеширование)
- минимум: список “трендовых каналов” под категории + их RSS

Из YouTube/Shorts собирать:
- заголовки, описания, теги (если доступно), длительность, просмотры/лайки (если API)
- затем кластеризовать темы → сформировать TrendSignals

ОБЯЗАТЕЛЬНО: TrendSignals — это НЕ копирование сценария и НЕ пересказ текста.
Это извлечение паттернов:
- популярные “углы”: “секрет/ошибка/топ-3/сравнение/миф”
- структура хуков: “вопрос”, “контраст”, “шок-факт”, “обещание”
- темп монтажа: частота смены сцен по длительности

# 8) Связка с “Топики” и “Скрипт”
8.1 В “Топики”:
- пользователь выбирает категорию → видит “свежие темы” из источников
- отдельный блок “Сейчас в тренде (YouTube Shorts)” → темы/кластеры

8.2 В “Скрипт”:
- при генерации сценария приложение подмешивает TrendSignals:
  - keywords, angles, pacingHints, hookPatterns
- В prompt’ах запрещаем прямое копирование:
  - использовать только как “инспирацию структуры/подачи”

# 9) UI/UX для “Источники”
- Экран: плитки категорий (как сейчас) + пагинация/поиск
- Внутри категории список источников с:
  - иконка типа (RSS/API/YT)
  - статус health (зел/желт/красн)
  - кнопки: Enable/Disable, Проверить, Открыть
- Добавить кнопку “Добавить источник” (ручной ввод URL)
  - автоопределение типа (попробовать RSS → если нет, html → если youtube)
- Добавить кнопку “Импорт пакета” (вставить список ссылок)

# 10) Тесты и гарантии
- На старте после сидирования: минимум 80% источников должны быть OK.
- Если в категории меньше 20 рабочих → подсветить “недостаточно источников”.
- YouTube Trends должен стабильно выдавать хотя бы 20 тренд-сигналов в день по всем категориям (агрегировано).

# 11) Итоговый deliverable
- sources.seed.json с 20–30 качественными источниками на категорию
- сервисы:
  - SourceService (CRUD)
  - HealthCheckService
  - IngestService (rss/api/html/youtube)
  - TrendSignalService (кластеризация + скоринг)
- UI обновления в /sources
- интеграция в /topics и /script через TrendSignals API